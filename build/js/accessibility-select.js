"use strict";function AccessibilitySelect(e){var s=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.select=document.querySelector(e),this.select.setAttribute("aria-label",n.label),this.select.setAttribute("tabindex","0"),this.select.setAttribute("role","listbox"),this.select){this.onChange=n.onChange||function(){};var t=document.createElement("span");t.className="custom-select__dropdown",this.selectedValueBlock=document.createElement("span"),this.selectedValueBlock.className="custom-select__selected-item-value",this.selectedValueBlock.setAttribute("data-value",n.initialValue.value),this.selectedValueBlock.innerText=n.initialValue.name||"",t.append(this.selectedValueBlock);var i=document.createElement("span");i.className="custom-select__dropdown-button",i.setAttribute("role","button"),i.setAttribute("aria-label","open dropdown list"),t.append(i),this.select.append(t),this.itemsList=document.createElement("ul"),this.itemsList.className="custom-select__list";var l=n.values||[],a=document.createElement("li");a.setAttribute("tabindex","0"),a.setAttribute("role","option"),a.setAttribute("id",n.name+"_elem"),a.innerHTML=n.initialValue.name,a.setAttribute("data-value",n.initialValue.value),a.addEventListener("click",function(e){console.log(1),s.onListElementClick.bind(s)(e)}),this.itemsList.append(a),this.setSelectedElement(a),l.forEach(function(e,t){var i=document.createElement("li");i.setAttribute("tabindex","0"),i.setAttribute("role","option"),i.setAttribute("id",n.name+"_elem_"+t),i.innerHTML=e,i.setAttribute("data-value",e),i.addEventListener("click",s.onListElementClick.bind(s)),s.itemsList.append(i)}),this.select.append(this.itemsList),this.activeItemIdx=0,i.addEventListener("click",this.toggleDropDown.bind(this)),this.selectedValueBlock.addEventListener("click",this.toggleDropDown.bind(this)),this.select.addEventListener("keydown",this.handleKeyDown.bind(this))}}AccessibilitySelect.prototype={toggleDropDown:function(){this.itemsList.classList.contains("open")?this.itemsList.classList.remove("open"):this.itemsList.classList.add("open")},openDropDown:function(){this.itemsList.classList.add("open")},closeDropDown:function(){this.itemsList.classList.remove("open")},onListElementClick:function(e){var t=Array.prototype.indexOf.call(this.itemsList.children,e.target);-1!==!t&&(this.activeItemIdx=t,this.setSelectedElement(this.itemsList.children[this.activeItemIdx]),this.closeDropDown())},setSelectedElement:function(e){if(e){var t=e.getAttribute("data-value");this.selectedValueBlock.setAttribute("data-value",t),this.select.setAttribute("data-value",t),this.selectedValueBlock.innerText=e.innerText;var i=!0,s=!1,n=void 0;try{for(var l,a=this.itemsList.children[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){l.value.setAttribute("aria-selected","")}}catch(e){s=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(s)throw n}}e.setAttribute("aria-selected","true"),this.select.setAttribute("aria-activedescendant",e.id),this.onChange()}},handleKeyDown:function(e){var t=13,i=27,s=32,n=37,l=38,a=39,c=40;if(-1!==[c,l,s,t,n,a,i].indexOf(e.keyCode))switch(e.preventDefault(),e.keyCode){case c:case a:this.nextActiveListItem();break;case l:case n:this.previousActiveListItem();break;case s:this.openDropDown(),this.itemsList.children[this.activeItemIdx].focus();break;case t:var o=this.itemsList.children[this.activeItemIdx];if(!o)break;this.setSelectedElement(o),this.closeDropDown(),this.select.focus();break;case i:this.closeDropDown(),this.select.focus()}},nextActiveListItem:function(){var e=this.activeItemIdx>=this.itemsList.children.length-1?0:this.activeItemIdx+1;this.itemsList.children[e].focus(),this.activeItemIdx=e},previousActiveListItem:function(){var e=0===this.activeItemIdx?this.itemsList.children.length-1:this.activeItemIdx-1;this.itemsList.children[e].focus(),this.activeItemIdx=e}};