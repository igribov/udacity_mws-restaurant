"use strict";var map,restaurant=void 0;function fetchRestaurantFromURL(r){if(self.restaurant)r(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),r(null,t)):console.error(e)}):(error="No restaurant id in URL",r(error,null))}}function fillRestaurantHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name,t.setAttribute("tabindex","0"),document.getElementById("restaurant-address").innerHTML=e.address;var r=document.getElementById("restaurant-img");r.className="restaurant-img",r.setAttribute("alt",e.name),r.src=DBHelper.imageUrlForRestaurant(e);var n=document.getElementById("restaurant-cuisine");n.setAttribute("tabindex","0"),n.innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}function fillRestaurantHoursHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var r in e){var n=document.createElement("tr"),a=document.createElement("td");a.innerHTML=r,n.appendChild(a);var i=document.createElement("td");i.innerHTML=e[r],i.setAttribute("aria-label",e[r]+","),n.appendChild(i),t.appendChild(n)}}function fillReviewsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container");if(!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var n=document.getElementById("reviews-list");e.forEach(function(e){n.appendChild(createReviewHTML(e))}),t.appendChild(n)}function createReviewHTML(e){var t=document.createElement("li");t.setAttribute("tabindex","0"),t.className="reviews-list-item",t.setAttribute("aria-label","review");var r=document.createElement("div");r.className="reviewer-info";var n=document.createElement("div");n.className="reviewer-info__name-date";var a=document.createElement("h3");a.setAttribute("tabindex","0"),a.setAttribute("aria-label",e.name),a.innerHTML=e.name;var i=document.createElement("date");i.setAttribute("tabindex","0"),i.innerHTML=e.date,n.appendChild(a),n.appendChild(i),r.appendChild(n),r.appendChild(createRatingStarsBlock(e.rating)),t.appendChild(r);var l=document.createElement("p");return l.setAttribute("tabindex","0"),l.className="reviewer-comment",l.innerHTML=e.comments,t.appendChild(l),t}function createRatingStarsBlock(e){var t,r=document.createElement("p");r.appendChild(((t=document.createElement("span")).className="rating-number",t.setAttribute("tabindex","0"),t.innerHTML="Rating : "+e,t));var n="★".repeat(+e);+e<5&&(n+="☆".repeat(5-+e));var a=document.createElement("span");return a.className="rating-stars",a.innerHTML=n,r.appendChild(a),r}function fillBreadcrumb(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),r=document.createElement("li");r.innerHTML=e.name,t.appendChild(r)}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}window.initMap=function(){registerServiceWorker(),fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};