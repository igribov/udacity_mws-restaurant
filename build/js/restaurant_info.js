"use strict";var map,restaurant=void 0;function fetchRestaurantFromURL(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}}function fillRestaurantHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name,t.setAttribute("tabindex","0"),document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}function fillRestaurantHoursHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}}function fillReviewsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container");if(!e){var n=document.createElement("p");return n.innerHTML="No reviews yet!",void t.appendChild(n)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)}function createReviewHTML(e){var t=document.createElement("li");t.setAttribute("tabindex","0"),t.className="reviews-list-item";var n=document.createElement("div");n.className="reviewer-info";var r=document.createElement("div");r.className="reviewer-info__name-date";var a=document.createElement("h3");a.innerHTML=e.name;var i=document.createElement("date");i.innerHTML=e.date,r.appendChild(a),r.appendChild(i),n.appendChild(r),n.appendChild(createRatingStarsBlock(e.rating)),t.appendChild(n);var l=document.createElement("p");return l.className="reviewer-comment",l.innerHTML=e.comments,t.appendChild(l),t}function createRatingStarsBlock(e){var t,n=document.createElement("p");n.appendChild(((t=document.createElement("span")).className="rating-number",t.innerHTML="Rating : "+e,t));var r="★".repeat(+e);+e<5&&(r+="☆".repeat(5-+e));var a=document.createElement("span");return a.className="rating-stars",a.innerHTML=r,n.appendChild(a),n}function fillBreadcrumb(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50IiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImNhbGxiYWNrIiwic2VsZiIsImlkIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiREJIZWxwZXIiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZXJyb3IiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInNldEF0dHJpYnV0ZSIsImFkZHJlc3MiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJpbWFnZSIsIm9wZXJhdGluZ19ob3VycyIsImN1aXNpbmUiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiZmlsbFJldmlld3NIVE1MIiwia2V5Iiwicm93IiwiY3JlYXRlRWxlbWVudCIsImRheSIsImFwcGVuZENoaWxkIiwidGltZSIsImhvdXJzIiwicmV2aWV3cyIsIm5vUmV2aWV3cyIsImNvbnRhaW5lciIsImZvckVhY2giLCJyZXZpZXciLCJ1bCIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImNsYXNzTmFtZSIsInJldmlld2VySW5mb0Jsb2NrIiwicmV2aWV3ZXJOYW1lRGF0ZSIsImRhdGUiLCJyYXRpbmciLCJjb21tZW50cyIsImNyZWF0ZVJhdGluZ1N0YXJzQmxvY2siLCJyYXRpbmdWYWx1ZSIsInNwYW4iLCJyYXRpbmdTdGFycyIsInJlcGVhdCIsInJhdGluZ1N0YXJzRWxlbWVudCIsImJyZWFkY3J1bWIiLCJ1cmwiLCJmaWxsQnJlYWRjcnVtYiIsImhyZWYiLCJyZXN1bHRzIiwiUmVnRXhwIiwibG9jYXRpb24iLCJyZXBsYWNlIiwid2luZG93IiwiaW5pdE1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJjb25zb2xlIiwiY2VudGVyIiwibGF0bG5nIiwic2Ny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QUgsV0FBQUcsS0FBQUoiLCJmaWxlIjoicmVzdGF1cmFudF9pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnQ7XG52YXIgbWFwO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDE2LFxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIGZldGNoUmVzdGF1cmFudEZyb21VUkwoY2FsbGJhY2spIHtcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpXG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudClcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5mdW5jdGlvbiBmaWxsUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpO1xuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcblxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG5cbiAgY29uc3QgY3Vpc2luZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWN1aXNpbmUnKTtcbiAgY3Vpc2luZS5pbm5lckhUTUwgPSByZXN0YXVyYW50LmN1aXNpbmVfdHlwZTtcblxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICB9XG4gIC8vIGZpbGwgcmV2aWV3c1xuICBmaWxsUmV2aWV3c0hUTUwoKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5mdW5jdGlvbiBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTChvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xuICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICBkYXkuaW5uZXJIVE1MID0ga2V5O1xuICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xuXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZ1bmN0aW9uIGZpbGxSZXZpZXdzSFRNTChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpIHtcblxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcblxuICBpZiAoIXJldmlld3MpIHtcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgbm9SZXZpZXdzLmlubmVySFRNTCA9ICdObyByZXZpZXdzIHlldCEnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXcpKTtcbiAgfSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSB7XG5cbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBsaS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgbGkuY2xhc3NOYW1lID0gJ3Jldmlld3MtbGlzdC1pdGVtJztcblxuICBjb25zdCByZXZpZXdlckluZm9CbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICByZXZpZXdlckluZm9CbG9jay5jbGFzc05hbWUgPSAncmV2aWV3ZXItaW5mbyc7XG5cbiAgY29uc3QgcmV2aWV3ZXJOYW1lRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICByZXZpZXdlck5hbWVEYXRlLmNsYXNzTmFtZSA9ICdyZXZpZXdlci1pbmZvX19uYW1lLWRhdGUnO1xuXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkYXRlJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XG5cbiAgcmV2aWV3ZXJOYW1lRGF0ZS5hcHBlbmRDaGlsZChuYW1lKTtcbiAgcmV2aWV3ZXJOYW1lRGF0ZS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICByZXZpZXdlckluZm9CbG9jay5hcHBlbmRDaGlsZChyZXZpZXdlck5hbWVEYXRlKTtcblxuICByZXZpZXdlckluZm9CbG9jay5hcHBlbmRDaGlsZChjcmVhdGVSYXRpbmdTdGFyc0Jsb2NrKHJldmlldy5yYXRpbmcpKTtcblxuICBsaS5hcHBlbmRDaGlsZChyZXZpZXdlckluZm9CbG9jayk7XG5cbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbW1lbnRzLmNsYXNzTmFtZSA9ICdyZXZpZXdlci1jb21tZW50JztcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICBsaS5hcHBlbmRDaGlsZChjb21tZW50cyk7XG5cbiAgcmV0dXJuIGxpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSYXRpbmdTdGFyc0Jsb2NrKHJhdGluZ1ZhbHVlKSB7XG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblxuICByYXRpbmcuYXBwZW5kQ2hpbGQoKCgpID0+IHtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzcGFuLmNsYXNzTmFtZSA9ICdyYXRpbmctbnVtYmVyJztcbiAgICBzcGFuLmlubmVySFRNTCA9ICdSYXRpbmcgOiAnICsgcmF0aW5nVmFsdWU7XG4gICAgcmV0dXJuIHNwYW47XG4gIH0pKCkpO1xuXG4gIGxldCByYXRpbmdTdGFycyA9ICfimIUnLnJlcGVhdCgrcmF0aW5nVmFsdWUpO1xuXG4gIGlmICgrcmF0aW5nVmFsdWUgPCA1KSB7XG4gICAgcmF0aW5nU3RhcnMgPSByYXRpbmdTdGFycyArICfimIYnLnJlcGVhdCg1IC0gK3JhdGluZ1ZhbHVlKTtcbiAgfVxuICBjb25zdCByYXRpbmdTdGFyc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHJhdGluZ1N0YXJzRWxlbWVudC5jbGFzc05hbWUgPSAncmF0aW5nLXN0YXJzJztcbiAgcmF0aW5nU3RhcnNFbGVtZW50LmlubmVySFRNTCA9IHJhdGluZ1N0YXJzO1xuXG4gIHJhdGluZy5hcHBlbmRDaGlsZChyYXRpbmdTdGFyc0VsZW1lbnQpO1xuXG4gIHJldHVybiByYXRpbmc7XG59XG5cbi8qKlxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAqL1xuZnVuY3Rpb24gZmlsbEJyZWFkY3J1bWIocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpIHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn1cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lIChuYW1lLCB1cmwpIHtcbiAgaWYgKCF1cmwpXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIXJlc3VsdHNbMl0pIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xufVxuIl19
