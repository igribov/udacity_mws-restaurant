"use strict";var map,restaurant=void 0;function fetchRestaurantFromURL(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}}function fillRestaurantHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name,t.setAttribute("tabindex","0"),document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e);var r=document.getElementById("restaurant-cuisine");r.setAttribute("tabindex","0"),r.innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}function fillRestaurantHoursHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}}function fillReviewsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container");if(!e){var n=document.createElement("p");return n.innerHTML="No reviews yet!",void t.appendChild(n)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)}function createReviewHTML(e){var t=document.createElement("li");t.setAttribute("tabindex","0"),t.className="reviews-list-item";var n=document.createElement("div");n.className="reviewer-info";var r=document.createElement("div");r.className="reviewer-info__name-date";var a=document.createElement("h3");a.innerHTML=e.name;var i=document.createElement("date");i.innerHTML=e.date,r.appendChild(a),r.appendChild(i),n.appendChild(r),n.appendChild(createRatingStarsBlock(e.rating)),t.appendChild(n);var l=document.createElement("p");return l.className="reviewer-comment",l.innerHTML=e.comments,t.appendChild(l),t}function createRatingStarsBlock(e){var t,n=document.createElement("p");n.appendChild(((t=document.createElement("span")).className="rating-number",t.innerHTML="Rating : "+e,t));var r="★".repeat(+e);+e<5&&(r+="☆".repeat(5-+e));var a=document.createElement("span");return a.className="rating-stars",a.innerHTML=r,n.appendChild(a),n}function fillBreadcrumb(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50IiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImNhbGxiYWNrIiwic2VsZiIsImlkIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiREJIZWxwZXIiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZXJyb3IiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsInNldEF0dHJpYnV0ZSIsImFkZHJlc3MiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJjdWlzaW5lIiwiY3Vpc2luZV90eXBlIiwiaW1hZ2UiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwib3BlcmF0aW5nX2hvdXJzIiwiZmlsbFJldmlld3NIVE1MIiwia2V5Iiwicm93IiwiY3JlYXRlRWxlbWVudCIsImRheSIsImFwcGVuZENoaWxkIiwidGltZSIsImhvdXJzIiwicmV2aWV3cyIsIm5vUmV2aWV3cyIsImNvbnRhaW5lciIsImZvckVhY2giLCJyZXZpZXciLCJ1bCIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImNsYXNzTmFtZSIsInJldmlld2VySW5mb0Jsb2NrIiwicmV2aWV3ZXJOYW1lRGF0ZSIsImRhdGUiLCJyYXRpbmciLCJjb21tZW50cyIsImNyZWF0ZVJhdGluZ1N0YXJzQmxvY2siLCJyYXRpbmdWYWx1ZSIsInNwYW4iLCJyYXRpbmdTdGFycyIsInJlcGVhdCIsInJhdGluZ1N0YXJzRWxlbWVudCIsImJyZWFkY3J1bWIiLCJ1cmwiLCJmaWxsQnJlYWRjcnVtYiIsImhyZWYiLCJyZXN1bHRzIiwiUmVnRXhwIiwibG9jYXRpb24iLCJyZXBsYWNlIiwid2luZG93IiwiaW5pdE1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJjb25zb2xlIiwiY2VudGVy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QURWNEQsT0FFT3BFLEVBQUFxRSxPQUNMbEUsYUFBZTZELElBRWJJLGlCQUNBRSxTQUFBQSx1QkFBYW5FLEtBQUFILFdBQUFHLEtBQUFKIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XG4gICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICovXG5mdW5jdGlvbiBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKGNhbGxiYWNrKSB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHsgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcbiAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcbiAgICBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCdcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcbiAqL1xuZnVuY3Rpb24gZmlsbFJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpIHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG4gIG5hbWUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuZnVuY3Rpb24gZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XG5cbiAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxuICovXG5mdW5jdGlvbiBmaWxsUmV2aWV3c0hUTUwocmV2aWV3cyA9IHNlbGYucmVzdGF1cmFudC5yZXZpZXdzKSB7XG5cbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVSZXZpZXdIVE1MKHJldmlldykge1xuXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gIGxpLmNsYXNzTmFtZSA9ICdyZXZpZXdzLWxpc3QtaXRlbSc7XG5cbiAgY29uc3QgcmV2aWV3ZXJJbmZvQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcmV2aWV3ZXJJbmZvQmxvY2suY2xhc3NOYW1lID0gJ3Jldmlld2VyLWluZm8nO1xuXG4gIGNvbnN0IHJldmlld2VyTmFtZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcmV2aWV3ZXJOYW1lRGF0ZS5jbGFzc05hbWUgPSAncmV2aWV3ZXItaW5mb19fbmFtZS1kYXRlJztcblxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcblxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGF0ZScpO1xuICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuXG4gIHJldmlld2VyTmFtZURhdGUuYXBwZW5kQ2hpbGQobmFtZSk7XG4gIHJldmlld2VyTmFtZURhdGUuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgcmV2aWV3ZXJJbmZvQmxvY2suYXBwZW5kQ2hpbGQocmV2aWV3ZXJOYW1lRGF0ZSk7XG5cbiAgcmV2aWV3ZXJJbmZvQmxvY2suYXBwZW5kQ2hpbGQoY3JlYXRlUmF0aW5nU3RhcnNCbG9jayhyZXZpZXcucmF0aW5nKSk7XG5cbiAgbGkuYXBwZW5kQ2hpbGQocmV2aWV3ZXJJbmZvQmxvY2spO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5jbGFzc05hbWUgPSAncmV2aWV3ZXItY29tbWVudCc7XG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gIHJldHVybiBsaTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmF0aW5nU3RhcnNCbG9jayhyYXRpbmdWYWx1ZSkge1xuICBjb25zdCByYXRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cbiAgcmF0aW5nLmFwcGVuZENoaWxkKCgoKSA9PiB7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3Bhbi5jbGFzc05hbWUgPSAncmF0aW5nLW51bWJlcic7XG4gICAgc3Bhbi5pbm5lckhUTUwgPSAnUmF0aW5nIDogJyArIHJhdGluZ1ZhbHVlO1xuICAgIHJldHVybiBzcGFuO1xuICB9KSgpKTtcblxuICBsZXQgcmF0aW5nU3RhcnMgPSAn4piFJy5yZXBlYXQoK3JhdGluZ1ZhbHVlKTtcblxuICBpZiAoK3JhdGluZ1ZhbHVlIDwgNSkge1xuICAgIHJhdGluZ1N0YXJzID0gcmF0aW5nU3RhcnMgKyAn4piGJy5yZXBlYXQoNSAtICtyYXRpbmdWYWx1ZSk7XG4gIH1cbiAgY29uc3QgcmF0aW5nU3RhcnNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICByYXRpbmdTdGFyc0VsZW1lbnQuY2xhc3NOYW1lID0gJ3JhdGluZy1zdGFycyc7XG4gIHJhdGluZ1N0YXJzRWxlbWVudC5pbm5lckhUTUwgPSByYXRpbmdTdGFycztcblxuICByYXRpbmcuYXBwZW5kQ2hpbGQocmF0aW5nU3RhcnNFbGVtZW50KTtcblxuICByZXR1cm4gcmF0aW5nO1xufVxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmZ1bmN0aW9uIGZpbGxCcmVhZGNydW1iKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59XG4vKipcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZSAobmFtZSwgdXJsKSB7XG4gIGlmICghdXJsKVxuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnXFxcXCQmJyk7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gIGlmICghcmVzdWx0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKCFyZXN1bHRzWzJdKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn1cbiJdfQ==
