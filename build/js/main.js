"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function o(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,c)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,f,t){!function(){function a(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function o(n,r,i){var o,e=new Promise(function(e,t){a(o=n[r].apply(n,i)).then(e,t)});return e.request=o,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return o(this[n],e,arguments)})})}function n(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function r(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=o(e,n,arguments)).then(function(e){if(e)return new s(e,t.request)});var e,t})})}function i(e){this._index=e}function s(e,t){this._cursor=e,this._request=t}function c(e){this._store=e}function u(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function l(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new u(n)}function d(e){this._db=e}e(i,"_index",["name","keyPath","multiEntry","unique"]),t(i,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(i,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(s,"_cursor",["direction","key","primaryKey","value"]),t(s,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(s.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),a(t._request).then(function(e){if(e)return new s(e,t._request)})})})}),c.prototype.createIndex=function(){return new i(this._store.createIndex.apply(this._store,arguments))},c.prototype.index=function(){return new i(this._store.index.apply(this._store,arguments))},e(c,"_store",["name","keyPath","indexNames","autoIncrement"]),t(c,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(c,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(c,"_store",IDBObjectStore,["deleteIndex"]),u.prototype.objectStore=function(){return new c(this._tx.objectStore.apply(this._tx,arguments))},e(u,"_tx",["objectStoreNames","mode"]),n(u,"_tx",IDBTransaction,["abort"]),l.prototype.createObjectStore=function(){return new c(this._db.createObjectStore.apply(this._db,arguments))},e(l,"_db",["name","version","objectStoreNames"]),n(l,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new u(this._db.transaction.apply(this._db,arguments))},e(d,"_db",["name","version","objectStoreNames"]),n(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[c,i].forEach(function(e){o in e.prototype&&(e.prototype[o.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],r=this._store||this._index,i=r[o].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[i,c].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(i.push(e.value),void 0===n||i.length!=n?e.continue():t(i)):t(i)})})})});var h={open:function(e,t,n){var r=o(indexedDB,"open",[e,t]),i=r.request;return i.onupgradeneeded=function(e){n&&n(new l(i.result,e.oldVersion,i.transaction))},r.then(function(e){return new d(e)})},delete:function(e){return o(indexedDB,"deleteDatabase",[e])}};void 0!==f?(f.exports=h,f.exports.default=f.exports):self.idb=h}()},{}],2:[function(e,t,n){function r(e){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.select=document.querySelector(e),this.select.setAttribute("aria-label",i.label),this.select.setAttribute("tabindex","0"),this.select.setAttribute("role","listbox"),this.select){this.onChange=i.onChange||function(){};var t=document.createElement("span");t.className="custom-select__dropdown",this.selectedValueBlock=document.createElement("span"),this.selectedValueBlock.className="custom-select__selected-item-value",this.selectedValueBlock.setAttribute("data-value",i.initialValue.value),this.selectedValueBlock.innerText=i.initialValue.name||"",t.append(this.selectedValueBlock);var n=document.createElement("span");n.className="custom-select__dropdown-button",n.setAttribute("role","button"),n.setAttribute("aria-label","open dropdown list"),t.append(n),this.select.append(t),this.itemsList=document.createElement("ul"),this.itemsList.className="custom-select__list";var o=i.values||[],a=document.createElement("li");a.setAttribute("tabindex","0"),a.setAttribute("role","option"),a.setAttribute("id",i.name+"_elem"),a.innerHTML=i.initialValue.name,a.setAttribute("data-value",i.initialValue.value),a.addEventListener("click",function(e){r.onListElementClick.bind(r)(e)}),this.itemsList.append(a),this.setSelectedElement(a),o.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("tabindex","0"),n.setAttribute("role","option"),n.setAttribute("id",i.name+"_elem_"+t),n.innerHTML=e,n.setAttribute("data-value",e),n.addEventListener("click",r.onListElementClick.bind(r)),r.itemsList.append(n)}),this.select.append(this.itemsList),this.activeItemIdx=0,n.addEventListener("click",this.toggleDropDown.bind(this)),this.selectedValueBlock.addEventListener("click",this.toggleDropDown.bind(this)),this.select.addEventListener("keydown",this.handleKeyDown.bind(this))}}r.prototype={toggleDropDown:function(){this.itemsList.classList.contains("open")?this.itemsList.classList.remove("open"):this.itemsList.classList.add("open")},openDropDown:function(){this.itemsList.classList.add("open")},closeDropDown:function(){this.itemsList.classList.remove("open")},onListElementClick:function(e){var t=Array.prototype.indexOf.call(this.itemsList.children,e.target);-1!==!t&&(this.activeItemIdx=t,this.setSelectedElement(this.itemsList.children[this.activeItemIdx],!0),this.closeDropDown())},setSelectedElement:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){var n=e.getAttribute("data-value");this.selectedValueBlock.setAttribute("data-value",n),this.select.setAttribute("data-value",n),this.selectedValueBlock.innerText=e.innerText;var r=!0,i=!1,o=void 0;try{for(var a,s=this.itemsList.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.setAttribute("aria-selected","")}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.setAttribute("aria-selected","true"),this.select.setAttribute("aria-activedescendant",e.id),t&&this.onChange()}},handleKeyDown:function(e){var t=13,n=27,r=32,i=37,o=38,a=39,s=40;if(-1!==[s,o,r,t,i,a,n].indexOf(e.keyCode))switch(e.preventDefault(),e.keyCode){case s:case a:this.nextActiveListItem();break;case o:case i:this.previousActiveListItem();break;case r:this.openDropDown(),this.itemsList.children[this.activeItemIdx].focus();break;case t:var c=this.itemsList.children[this.activeItemIdx];if(!c)break;this.setSelectedElement(c),this.closeDropDown(),this.select.focus();break;case n:this.closeDropDown(),this.select.focus()}},nextActiveListItem:function(){var e=this.activeItemIdx>=this.itemsList.children.length-1?0:this.activeItemIdx+1;this.itemsList.children[e].focus(),this.activeItemIdx=e},previousActiveListItem:function(){var e=0===this.activeItemIdx?this.itemsList.children.length-1:this.activeItemIdx-1;this.itemsList.children[e].focus(),this.activeItemIdx=e}},t.exports=r},{}],3:[function(e,t,n){var r=e("idb"),i="restaurants",o=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"fetchRestaurants",value:function(){var t=this;return fetch(o.DATABASE_URL+"/restaurants").then(function(e){return e.json()}).then(function(e){return t.putRestaurantsIntoIndexedDb(e).then(function(){return e})}).catch(function(e){return o.fetchRestaurantsFromIndexedDb().then(function(e){if(e.length)return e;throw new Error("Fetch error")})})}},{key:"fetchRestaurantWithReviews",value:function(t){var i=this;return Promise.all([this.fetchRestaurant(t),this.fetchRestaurantReviews(t)]).then(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n.reviews=r,i.putRestaurantIntoIndexedDb(n).then(function(){return n})}).catch(function(e){return o.fetchRestaurantFromIndexedDb(t).then(function(e){if(e)return e;throw new Error("Fetch error")})})}},{key:"fetchRestaurant",value:function(e){return fetch(o.DATABASE_URL+"/restaurants/"+e).then(function(e){return e.json()})}},{key:"fetchRestaurantReviews",value:function(e){return fetch(o.DATABASE_URL+"/reviews/?restaurant_id="+e).then(function(e){return e.json()})}},{key:"fetchRestaurantsFromIndexedDb",value:function(){return o.openDatabase().then(function(e){return e.transaction(i).objectStore(i).getAll()})}},{key:"fetchRestaurantFromIndexedDb",value:function(t){return o.openDatabase().then(function(e){return e.transaction(i).objectStore(i).get(+t)})}},{key:"putRestaurantsIntoIndexedDb",value:function(n){return o.clearRestaurantsInIndexedDb().then(function(){return o.openDatabase().then(function(e){var t=e.transaction(i,"readwrite");return n.forEach(function(e){return t.objectStore(i).put(e)}),t.complete})})}},{key:"putRestaurantIntoIndexedDb",value:function(n){return o.openDatabase().then(function(e){var t=e.transaction(i,"readwrite");return t.objectStore(i).put(n),t.complete})}},{key:"clearRestaurantsInIndexedDb",value:function(){return o.openDatabase().then(function(e){var t=e.transaction(i,"readwrite");return t.objectStore(i).clear(),t.complete})}},{key:"openDatabase",value:function(){return r.open("restaurants-db",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(i,{keyPath:"id"}).createIndex("status","status")}})}},{key:"fetchRestaurantById",value:function(e){return o.fetchRestaurantWithReviews(e)}},{key:"fetchRestaurantByCuisine",value:function(t,e){o.fetchRestaurants().then(function(e){return e.filter(function(e){return e.cuisine_type==t})})}},{key:"fetchRestaurantByNeighborhood",value:function(t){return o.fetchRestaurants().then(function(e){return e.filter(function(e){return e.neighborhood==t})})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(n,r){return o.fetchRestaurants().then(function(e){var t=e;return"all"!=n&&(t=t.filter(function(e){return e.cuisine_type==n})),"all"!=r&&(t=t.filter(function(e){return e.neighborhood==r})),t})}},{key:"fetchNeighborhoodsAndCuisines",value:function(){return o.fetchRestaurants().then(function(n){var r=n.map(function(e,t){return n[t].neighborhood}),i=n.map(function(e,t){return n[t].cuisine_type});return{neighborhoods:r.filter(function(e,t){return r.indexOf(e)==t}),cuisines:i.filter(function(e,t){return i.indexOf(e)==t}),restaurants:n}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/img/"+e.id+"_small.jpg"}},{key:"imageSrcSetForRestaurant",value:function(e){return"/img/"+e.photograph}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:o.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337"}}]),o}();t.exports=o},{idb:1}],4:[function(e,t,n){var u=e("./dbhelper"),i=e("./accessibility-select"),r=e("./process"),o=!1;function a(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.getAttribute("data-value"),r=t.getAttribute("data-value");u.fetchRestaurantByCuisineAndNeighborhood(n,r).then(function(e){!function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.setMap(null)});self.markers=[],self.restaurants=e}(e),s(e)}).catch(function(e){console.error(e)})}function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e,t){n.append(function(e,t){var n=document.createElement("li");n.setAttribute("tabindex",0),1<t&&(n.className="hidden");var r=document.createElement("img");r.className="restaurant-img",r.src=u.imageUrlForRestaurant(e),r.setAttribute("alt","An image from the restaurant "+e.name),n.append(r);var i=document.createElement("div");i.className="restaurant-info";var o=document.createElement("h2");o.className="restaurant-card-name",o.setAttribute("tabindex","0"),o.innerHTML=e.name,i.append(o);var a=document.createElement("p");a.setAttribute("tabindex",0),a.innerHTML=e.neighborhood,i.append(a);var s=document.createElement("p");s.setAttribute("tabindex",0),s.innerHTML=e.address,i.append(s);var c=document.createElement("a");return c.innerHTML="View Details",c.href=u.urlForRestaurant(e),i.append(c),n.append(i),n}(e,t))}),function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=u.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers||(self.markers=[]),self.markers.push(t)})}(e)}document.addEventListener("DOMContentLoaded",function(e){console.log("DOMContentLoaded"),r.registerServiceWorker(),u.fetchNeighborhoodsAndCuisines().then(function(e){var t=e.restaurants,n=e.neighborhoods,r=e.cuisines;return function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,new i("#neighborhoods-select",{name:"Neighborhood",label:"Neighborhood",initialValue:{name:"All Neighborhoods",value:"all"},values:self.neighborhoods,onChange:a})}(self.neighborhoods=n),function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines;new i("#cuisines-select",{name:"Cuisines",label:"Cuisines",initialValue:{name:"All Cuisines",value:"all"},values:e,onChange:a})}(self.cuisines=r),t}).catch(function(e){console.error(e)}).then(function(e){s(e)})}),document.querySelector("#map-actions .toggle-map").onclick=function(){var e=document.getElementById("map");"none"===e.style.display?(this.setAttribute("aria-label","Close Google Map"),e.style.display="block"):(this.setAttribute("aria-label","Open Google Map"),e.style.display="none")},window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),window.addEventListener("scroll",function(){o||(o=!0);var e=document.querySelectorAll("#restaurants-list li.hidden");Array.prototype.forEach.call(e,function(e){return e.classList.remove("hidden")})}),setTimeout(function(){document.getElementById("map").querySelector("iframe").setAttribute("title","Google map")},200)}},{"./accessibility-select":2,"./dbhelper":3,"./process":5}],5:[function(e,t,n){function r(e){e?e.addEventListener("statechange",function(){console.log("ServiceWorker state was changed to "+e.state),"installed"===e.state&&(console.log("Service worker installed and waiting for activation",e),i(e))}):console.log("Worker not defined!")}function i(e){var r,i;(r={action:"skipWaiting"},i=e,new Promise(function(t,n){var e=new MessageChannel;e.port1.onmessage=function(e){e.data.error?n(e.data.error):t(e.data)},i.postMessage(r,[e.port2])})).then(function(e){console.log(e)})}t.exports={registerServiceWorker:function(){if(!1 in navigator)throw new Error("serviceWorker not register");navigator.serviceWorker.register("/sw.js").then(function(e){var t;navigator.serviceWorker.controller&&(e.active&&console.log("There is an an active service worker"),e.waiting&&(console.log("waiting :",e.waiting),console.log("service worker is waiting"),i(e.waiting)),e.installing&&(console.log("installing : ",e),console.log("service worker status is installing"),r(e.installing)),e.addEventListener("updatefound",function(){console.log("service worker update found",e),r(e.installing)}),navigator.serviceWorker.addEventListener("controllerchange",function(){t||setTimeout(function(){window.location.reload(),t=!0},1e3)}))}).catch(function(e){console.log("Registration failed with "+e)})}}},{}]},{},[4]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaWRiL2xpYi9pZGIuanMiLCJzcmMvanMvYWNjZXNzaWJpbGl0eS1zZWxlY3QuanMiLCJzcmMvanMvZGJoZWxwZXIuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9wcm9jZXNzLmpzIl0sIm5hbWVzIjpbInJlc3VsdCIsImVycm9yIiwicmVxdWVzdCIsImFyZ3MiLCJyZWplY3QiLCJwIiwicHJvcCIsInZhbCIsImFyZ3VtZW50cyIsImluZGV4IiwiY3Vyc29yIiwic3RvcmUiLCJpZGJUcmFuc2FjdGlvbiIsInJlc29sdmUiLCJkYiIsIm9sZFZlcnNpb24iLCJ0cmFuc2FjdGlvbiIsInRoaXMiLCJfcmVxdWVzdCIsImFyciIsIl9pbmRleCIsInZhbHVlIiwiY29udGludWUiLCJpdGVtcyIsInZlcnNpb24iLCJuYW1lIiwiZXhwIiwiZXhwb3J0cyIsIkFjY2Vzc2liaWxpdHlTZWxlY3QiLCJzZWxlY3RvciIsIl90aGlzIiwib3B0aW9ucyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImxhYmVsIiwib25DaGFuZ2UiLCJkcm9wZG93biIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzZWxlY3RlZFZhbHVlQmxvY2siLCJpbml0aWFsVmFsdWUiLCJpbm5lclRleHQiLCJhcHBlbmQiLCJkcm9wZG93bkJ1dHRvbiIsIml0ZW1zTGlzdCIsIm5laWdoYm9yaG9vZHMiLCJ2YWx1ZXMiLCJvcHRpb24iLCJpbm5lckhUTUwiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm9uTGlzdEVsZW1lbnRDbGljayIsImJpbmQiLCJzZXRTZWxlY3RlZEVsZW1lbnQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwiYWN0aXZlSXRlbUlkeCIsInRvZ2dsZURyb3BEb3duIiwiaGFuZGxlS2V5RG93biIsInByb3RvdHlwZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwic2VsZWN0ZWRFbGVtZW50SW5kZXgiLCJBcnJheSIsImluZGV4T2YiLCJjYWxsIiwiY2hpbGRyZW4iLCJ0YXJnZXQiLCJjbG9zZURyb3BEb3duIiwiZWxlbWVudCIsInRyaWdnZXJFdmVudCIsImdldEF0dHJpYnV0ZSIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwibmV4dCIsImRvbmUiLCJpZCIsIlZLX0VOVEVSIiwiVktfRVNDIiwiVktfU1BBQ0UiLCJWS19MRUZUIiwiVktfVVAiLCJWS19SSUdIVCIsIlZLX0RPV04iLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJuZXh0QWN0aXZlTGlzdEl0ZW0iLCJwcmV2aW91c0FjdGl2ZUxpc3RJdGVtIiwib3BlbkRyb3BEb3duIiwiZm9jdXMiLCJhY3RpdmUiLCJuZXh0RWxlbWVudEluZGV4IiwicHJldkVsZW1lbnRJbmRleCIsIm1vZHVsZSIsImlkYiIsInJlcXVpcmUiLCJEQl9SRVNUQVVSQU5UU19UQUJMRSIsIkRCSGVscGVyIiwiX3RoaXMyIiwiREFUQUJBU0VfVVJMIiwidGhlbiIsImRhdGEiLCJqc29uIiwicmVzdGF1cmFudHMiLCJwdXRSZXN0YXVyYW50c0ludG9JbmRleGVkRGIiLCJjYXRjaCIsImVyciIsImZldGNoUmVzdGF1cmFudHNGcm9tSW5kZXhlZERiIiwiRXJyb3IiLCJfdGhpczMiLCJhbGwiLCJmZXRjaFJlc3RhdXJhbnQiLCJmZXRjaFJlc3RhdXJhbnRSZXZpZXdzIiwiX3JlZiIsIl9yZWYyIiwiX3NsaWNlZFRvQXJyYXkiLCJyZXN0YXVyYW50IiwicmV2aWV3cyIsInB1dFJlc3RhdXJhbnRJbnRvSW5kZXhlZERiIiwiZmV0Y2hSZXN0YXVyYW50RnJvbUluZGV4ZWREYiIsInJlc3RhdXJhbnRJZCIsIm9wZW5EYXRhYmFzZSIsIm9iamVjdFN0b3JlIiwiZ2V0QWxsIiwiZ2V0IiwiY2xlYXJSZXN0YXVyYW50c0luSW5kZXhlZERiIiwidHgiLCJwdXQiLCJjb21wbGV0ZSIsImNsZWFyIiwib3BlbiIsInVwZ3JhZGVEYiIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsImNyZWF0ZUluZGV4IiwiZmV0Y2hSZXN0YXVyYW50V2l0aFJldmlld3MiLCJjdWlzaW5lIiwiY2FsbGJhY2siLCJmZXRjaFJlc3RhdXJhbnRzIiwiZmlsdGVyIiwiciIsImN1aXNpbmVfdHlwZSIsInJlc3VsdHMiLCJtYXAiLCJ2IiwiaSIsImN1aXNpbmVzIiwicGhvdG9ncmFwaCIsImdvb2dsZSIsIm1hcHMiLCJNYXJrZXIiLCJsYXRsbmciLCJ1cmxGb3JSZXN0YXVyYW50IiwiQW5pbWF0aW9uIiwiRFJPUCIsInByb2Nlc3MiLCJzY3JvbGxlZCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsImdldEVsZW1lbnRCeUlkIiwiblNlbGVjdCIsImZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZCIsInNlbGYiLCJtYXJrZXJzIiwibSIsInNldE1hcCIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJ1bCIsImxpIiwiaW1hZ2UiLCJzcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJpbmZvQmxvY2siLCJhZGRyZXNzIiwibW9yZSIsImhyZWYiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsIm1hcmtlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJldmVudCIsImFkZExpc3RlbmVyIiwibG9jYXRpb24iLCJ1cmwiLCJwdXNoIiwibG9nIiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwiZmV0Y2hOZWlnaGJvcmhvb2RzQW5kQ3Vpc2luZXMiLCJfcmVmMyIsIm9uY2xpY2siLCJzdHlsZSIsImRpc3BsYXkiLCJ3aW5kb3ciLCJpbml0TWFwIiwiTWFwIiwiaGlkZGVuSXRlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWwiLCJ0cmFja0luc3RhbGxpbmciLCJpbnN0YWxsaW5nV29ya2VyIiwic3RhdGUiLCJ1cGRhdGVTZXJ2aWNlV29ya2VyIiwid29ya2VyIiwibXNnIiwiYWN0aW9uIiwiUHJvbWlzZSIsIm1zZ0NoYW4iLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJwb3J0MiIsInJlc3BvbnNlRnJvbVN3IiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwicmVnIiwicmVmcmVzaGluZyIsImNvbnRyb2xsZXIiLCJ3YWl0aW5nIiwiaW5zdGFsbGluZyIsInJlbG9hZCJdLCJtYXBwaW5ncyI6Im9zQ0FBQSwyR0NXQUEsa0NBSUFDLGdDQU1BQywrQ0FFQUMsV0FDQUMsc0JBR0FGLEVBQ0FHLDZHQWVBQywrQkFHQUMsaUhBVUFDLHNJQVNBQSxnSUFTQUEsbURBdkNBTixpREE2Q0FPLCtCQXdCQUMsZ0JBQ0FSLDRCQWdDQVMseUJBd0NBQyxrRUFHQUMsOEJBR0FaLGlDQUdBQSxxQ0FtQkFhLGtCQUNBQyx5QkFDQUMsMEJBbUJBRixlQS9JQSxDQUNBLE9BQ0EsVUFDQSxhQUNBLGlDQUdBLENBQ0EsTUFDQSxTQUNBLFNBQ0EsYUFDQSxnQ0FHQSxDQUNBLGFBQ0EsZ0NBUUEsQ0FDQSxZQUNBLE1BQ0EsYUFDQSxrQ0FHQSxDQUNBLFNBQ0Esc0lBT0FHLE9BQ0FULHVGQUVBTCx3REFHQWUsNEdBV0FWLDJGQUlBQSwwQkFHQSxDQUNBLE9BQ0EsVUFDQSxhQUNBLDhDQUdBLENBQ0EsTUFDQSxNQUNBLFNBQ0EsUUFDQSxNQUNBLFNBQ0EsU0FDQSxhQUNBLHNDQUdBLENBQ0EsYUFDQSw4Q0FHQSxDQUNBLG9HQW1CQUEsdUJBR0EsQ0FDQSxtQkFDQSxrQ0FHQSxDQUNBLDBHQVVBQSx1QkFHQSxDQUNBLE9BQ0EsVUFDQSwyQ0FHQSxDQUNBLG9CQUNBLDhGQVFBQSx1QkFHQSxDQUNBLE9BQ0EsVUFDQSwyQ0FHQSxDQUNBLHlLQVdBQSxxQ0F0UEFXLGlCQXVQQSx1QkFDQUMsaUNBQ0EsK0JBRUFwQixxR0FVQWlCLE9BQ0EsNEVB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Y0FBQXpLLGlCQUFBLG1CQUE2RCxXQUMzRDRLLGNBQ1csa0JBQ1RuQyxTQUFBdUMsWUFDQSxHQUZGLFVBNUJKbkgsTUFrQ1MsU0FBQWpILFdBQ1BnTSxJQUFZLDRCQUFaaE0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gdG9BcnJheShhcnIpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciByZXF1ZXN0O1xuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0ID0gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuXG4gICAgcC5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncyk7XG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIHAucmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVByb3BlcnRpZXMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJveHlDbGFzcy5wcm90b3R5cGUsIHByb3AsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICB0aGlzW3RhcmdldFByb3BdW3Byb3BdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eU1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpc1t0YXJnZXRQcm9wXVtwcm9wXS5hcHBseSh0aGlzW3RhcmdldFByb3BdLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoUHJveHlDbGFzcywgdGFyZ2V0UHJvcCwgQ29uc3RydWN0b3IsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKCEocHJvcCBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgICBQcm94eUNsYXNzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwodGhpc1t0YXJnZXRQcm9wXSwgcHJvcCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleChpbmRleCkge1xuICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoSW5kZXgsICdfaW5kZXgnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnbXVsdGlFbnRyeScsXG4gICAgJ3VuaXF1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ2dldCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhJbmRleCwgJ19pbmRleCcsIElEQkluZGV4LCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBmdW5jdGlvbiBDdXJzb3IoY3Vyc29yLCByZXF1ZXN0KSB7XG4gICAgdGhpcy5fY3Vyc29yID0gY3Vyc29yO1xuICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEN1cnNvciwgJ19jdXJzb3InLCBbXG4gICAgJ2RpcmVjdGlvbicsXG4gICAgJ2tleScsXG4gICAgJ3ByaW1hcnlLZXknLFxuICAgICd2YWx1ZSdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhDdXJzb3IsICdfY3Vyc29yJywgSURCQ3Vyc29yLCBbXG4gICAgJ3VwZGF0ZScsXG4gICAgJ2RlbGV0ZSdcbiAgXSk7XG5cbiAgLy8gcHJveHkgJ25leHQnIG1ldGhvZHNcbiAgWydhZHZhbmNlJywgJ2NvbnRpbnVlJywgJ2NvbnRpbnVlUHJpbWFyeUtleSddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIGlmICghKG1ldGhvZE5hbWUgaW4gSURCQ3Vyc29yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICBDdXJzb3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3Vyc29yID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGN1cnNvci5fY3Vyc29yW21ldGhvZE5hbWVdLmFwcGx5KGN1cnNvci5fY3Vyc29yLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QoY3Vyc29yLl9yZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBjdXJzb3IuX3JlcXVlc3QpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIE9iamVjdFN0b3JlKHN0b3JlKSB7XG4gICAgdGhpcy5fc3RvcmUgPSBzdG9yZTtcbiAgfVxuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5jcmVhdGVJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuY3JlYXRlSW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIE9iamVjdFN0b3JlLnByb3RvdHlwZS5pbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgSW5kZXgodGhpcy5fc3RvcmUuaW5kZXguYXBwbHkodGhpcy5fc3RvcmUsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdpbmRleE5hbWVzJyxcbiAgICAnYXV0b0luY3JlbWVudCdcbiAgXSk7XG5cbiAgcHJveHlSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ3B1dCcsXG4gICAgJ2FkZCcsXG4gICAgJ2RlbGV0ZScsXG4gICAgJ2NsZWFyJyxcbiAgICAnZ2V0JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ2RlbGV0ZUluZGV4J1xuICBdKTtcblxuICBmdW5jdGlvbiBUcmFuc2FjdGlvbihpZGJUcmFuc2FjdGlvbikge1xuICAgIHRoaXMuX3R4ID0gaWRiVHJhbnNhY3Rpb247XG4gICAgdGhpcy5jb21wbGV0ZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBUcmFuc2FjdGlvbi5wcm90b3R5cGUub2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX3R4Lm9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX3R4LCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVHJhbnNhY3Rpb24sICdfdHgnLCBbXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnLFxuICAgICdtb2RlJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVHJhbnNhY3Rpb24sICdfdHgnLCBJREJUcmFuc2FjdGlvbiwgW1xuICAgICdhYm9ydCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVXBncmFkZURCKGRiLCBvbGRWZXJzaW9uLCB0cmFuc2FjdGlvbikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gICAgdGhpcy5vbGRWZXJzaW9uID0gb2xkVmVyc2lvbjtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgfVxuXG4gIFVwZ3JhZGVEQi5wcm90b3R5cGUuY3JlYXRlT2JqZWN0U3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoVXBncmFkZURCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhVcGdyYWRlREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdkZWxldGVPYmplY3RTdG9yZScsXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICBmdW5jdGlvbiBEQihkYikge1xuICAgIHRoaXMuX2RiID0gZGI7XG4gIH1cblxuICBEQi5wcm90b3R5cGUudHJhbnNhY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmFwcGx5KHRoaXMuX2RiLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKERCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIC8vIEFkZCBjdXJzb3IgaXRlcmF0b3JzXG4gIC8vIFRPRE86IHJlbW92ZSB0aGlzIG9uY2UgYnJvd3NlcnMgZG8gdGhlIHJpZ2h0IHRoaW5nIHdpdGggcHJvbWlzZXNcbiAgWydvcGVuQ3Vyc29yJywgJ29wZW5LZXlDdXJzb3InXS5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmNOYW1lKSB7XG4gICAgW09iamVjdFN0b3JlLCBJbmRleF0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgICAgLy8gRG9uJ3QgY3JlYXRlIGl0ZXJhdGVLZXlDdXJzb3IgaWYgb3BlbktleUN1cnNvciBkb2Vzbid0IGV4aXN0LlxuICAgICAgaWYgKCEoZnVuY05hbWUgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuXG4gICAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGVbZnVuY05hbWUucmVwbGFjZSgnb3BlbicsICdpdGVyYXRlJyldID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBuYXRpdmVPYmplY3QgPSB0aGlzLl9zdG9yZSB8fCB0aGlzLl9pbmRleDtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuYXRpdmVPYmplY3RbZnVuY05hbWVdLmFwcGx5KG5hdGl2ZU9iamVjdCwgYXJncy5zbGljZSgwLCAtMSkpO1xuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHBvbHlmaWxsIGdldEFsbFxuICBbSW5kZXgsIE9iamVjdFN0b3JlXS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwpIHJldHVybjtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24ocXVlcnksIGNvdW50KSB7XG4gICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgIGluc3RhbmNlLml0ZXJhdGVDdXJzb3IocXVlcnksIGZ1bmN0aW9uKGN1cnNvcikge1xuICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChjdXJzb3IudmFsdWUpO1xuXG4gICAgICAgICAgaWYgKGNvdW50ICE9PSB1bmRlZmluZWQgJiYgaXRlbXMubGVuZ3RoID09IGNvdW50KSB7XG4gICAgICAgICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgdmFyIGV4cCA9IHtcbiAgICBvcGVuOiBmdW5jdGlvbihuYW1lLCB2ZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnb3BlbicsIFtuYW1lLCB2ZXJzaW9uXSk7XG4gICAgICB2YXIgcmVxdWVzdCA9IHAucmVxdWVzdDtcblxuICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAodXBncmFkZUNhbGxiYWNrKSB7XG4gICAgICAgICAgdXBncmFkZUNhbGxiYWNrKG5ldyBVcGdyYWRlREIocmVxdWVzdC5yZXN1bHQsIGV2ZW50Lm9sZFZlcnNpb24sIHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgICByZXR1cm4gbmV3IERCKGRiKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdENhbGwoaW5kZXhlZERCLCAnZGVsZXRlRGF0YWJhc2UnLCBbbmFtZV0pO1xuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cDtcbiAgICBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gbW9kdWxlLmV4cG9ydHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgc2VsZi5pZGIgPSBleHA7XG4gIH1cbn0oKSk7XG4iLCJcbmZ1bmN0aW9uIEFjY2Vzc2liaWxpdHlTZWxlY3Qoc2VsZWN0b3IsIG9wdGlvbnMgPSB7fSkge1xuICB0aGlzLnNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB0aGlzLnNlbGVjdC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBvcHRpb25zLmxhYmVsKTtcbiAgdGhpcy5zZWxlY3Quc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gIHRoaXMuc2VsZWN0LnNldEF0dHJpYnV0ZSgncm9sZScsICdsaXN0Ym94Jyk7XG5cbiAgaWYgKCF0aGlzLnNlbGVjdCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMub25DaGFuZ2UgPSBvcHRpb25zLm9uQ2hhbmdlIHx8ICgoKSA9PiB7fSk7XG5cbiAgY29uc3QgZHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGRyb3Bkb3duLmNsYXNzTmFtZSA9ICdjdXN0b20tc2VsZWN0X19kcm9wZG93bic7XG5cbiAgdGhpcy5zZWxlY3RlZFZhbHVlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHRoaXMuc2VsZWN0ZWRWYWx1ZUJsb2NrLmNsYXNzTmFtZSA9ICdjdXN0b20tc2VsZWN0X19zZWxlY3RlZC1pdGVtLXZhbHVlJztcbiAgdGhpcy5zZWxlY3RlZFZhbHVlQmxvY2suc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgb3B0aW9ucy5pbml0aWFsVmFsdWUudmFsdWUpO1xuICB0aGlzLnNlbGVjdGVkVmFsdWVCbG9jay5pbm5lclRleHQgPSBvcHRpb25zLmluaXRpYWxWYWx1ZS5uYW1lIHx8ICcnO1xuICBkcm9wZG93bi5hcHBlbmQodGhpcy5zZWxlY3RlZFZhbHVlQmxvY2spO1xuXG4gIGNvbnN0IGRyb3Bkb3duQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBkcm9wZG93bkJ1dHRvbi5jbGFzc05hbWUgPSAnY3VzdG9tLXNlbGVjdF9fZHJvcGRvd24tYnV0dG9uJztcbiAgZHJvcGRvd25CdXR0b24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuICBkcm9wZG93bkJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnb3BlbiBkcm9wZG93biBsaXN0Jyk7XG5cbiAgZHJvcGRvd24uYXBwZW5kKGRyb3Bkb3duQnV0dG9uKTtcbiAgdGhpcy5zZWxlY3QuYXBwZW5kKGRyb3Bkb3duKTtcblxuICB0aGlzLml0ZW1zTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gIHRoaXMuaXRlbXNMaXN0LmNsYXNzTmFtZSA9ICdjdXN0b20tc2VsZWN0X19saXN0JztcblxuICBjb25zdCBuZWlnaGJvcmhvb2RzID0gb3B0aW9ucy52YWx1ZXMgfHwgW107XG5cbiAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICBvcHRpb24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ29wdGlvbicpO1xuICBvcHRpb24uc2V0QXR0cmlidXRlKCdpZCcsIG9wdGlvbnMubmFtZSArICdfZWxlbScpO1xuICBvcHRpb24uaW5uZXJIVE1MID0gb3B0aW9ucy5pbml0aWFsVmFsdWUubmFtZTtcbiAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIG9wdGlvbnMuaW5pdGlhbFZhbHVlLnZhbHVlKTtcbiAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICB0aGlzLm9uTGlzdEVsZW1lbnRDbGljay5iaW5kKHRoaXMpKGUpO1xuICB9KTtcbiAgdGhpcy5pdGVtc0xpc3QuYXBwZW5kKG9wdGlvbik7XG4gIHRoaXMuc2V0U2VsZWN0ZWRFbGVtZW50KG9wdGlvbik7XG5cbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKChuZWlnaGJvcmhvb2QsIGluZGV4KSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgncm9sZScsICdvcHRpb24nKTtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdpZCcsIG9wdGlvbnMubmFtZSArICdfZWxlbV8nICsgaW5kZXgpO1xuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIG5laWdoYm9yaG9vZCk7XG4gICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkxpc3RFbGVtZW50Q2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5pdGVtc0xpc3QuYXBwZW5kKG9wdGlvbik7XG4gIH0pO1xuXG4gIHRoaXMuc2VsZWN0LmFwcGVuZCh0aGlzLml0ZW1zTGlzdCk7XG5cbiAgdGhpcy5hY3RpdmVJdGVtSWR4ID0gMDtcblxuICBkcm9wZG93bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMudG9nZ2xlRHJvcERvd24uYmluZCh0aGlzKSk7XG4gIHRoaXMuc2VsZWN0ZWRWYWx1ZUJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVEcm9wRG93bi5iaW5kKHRoaXMpKTtcblxuICB0aGlzLnNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xufVxuXG5BY2Nlc3NpYmlsaXR5U2VsZWN0LnByb3RvdHlwZSA9IHtcblxuICB0b2dnbGVEcm9wRG93bigpIHtcbiAgICBpZiAodGhpcy5pdGVtc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHtcbiAgICAgIHRoaXMuaXRlbXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pdGVtc0xpc3QuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgIH1cbiAgfSxcblxuICBvcGVuRHJvcERvd24oKSB7XG4gICAgdGhpcy5pdGVtc0xpc3QuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICB9LFxuXG4gIGNsb3NlRHJvcERvd24oKSB7XG4gICAgdGhpcy5pdGVtc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICB9LFxuXG4gIG9uTGlzdEVsZW1lbnRDbGljayhlKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50SW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMuaXRlbXNMaXN0LmNoaWxkcmVuLCBlLnRhcmdldCk7XG4gICAgaWYgKCFzZWxlY3RlZEVsZW1lbnRJbmRleCA9PT0gLTEpXG4gICAgICByZXR1cm47XG5cbiAgICB0aGlzLmFjdGl2ZUl0ZW1JZHggPSBzZWxlY3RlZEVsZW1lbnRJbmRleDtcbiAgICB0aGlzLnNldFNlbGVjdGVkRWxlbWVudCh0aGlzLml0ZW1zTGlzdC5jaGlsZHJlblt0aGlzLmFjdGl2ZUl0ZW1JZHhdLCB0cnVlKTtcbiAgICB0aGlzLmNsb3NlRHJvcERvd24oKTtcbiAgfSxcblxuICBzZXRTZWxlY3RlZEVsZW1lbnQoZWxlbWVudCwgdHJpZ2dlckV2ZW50ID0gZmFsc2UpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7XG4gICAgdGhpcy5zZWxlY3RlZFZhbHVlQmxvY2suc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgdmFsdWUpO1xuICAgIHRoaXMuc2VsZWN0LnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHZhbHVlKTtcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVCbG9jay5pbm5lclRleHQgPSBlbGVtZW50LmlubmVyVGV4dDtcbiAgICBmb3IgKGNvbnN0IGVsIG9mIHRoaXMuaXRlbXNMaXN0LmNoaWxkcmVuKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAnJyk7XG4gICAgfVxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICB0aGlzLnNlbGVjdC5zZXRBdHRyaWJ1dGUoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIGVsZW1lbnQuaWQpO1xuICAgIGlmICh0cmlnZ2VyRXZlbnQpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgLy8gRGVmaW5lIHZhbHVlcyBmb3Iga2V5Y29kZXNcbiAgICBjb25zdCBWS19FTlRFUiA9IDEzO1xuICAgIGNvbnN0IFZLX0VTQyA9IDI3O1xuICAgIGNvbnN0IFZLX1NQQUNFID0gMzI7XG4gICAgY29uc3QgVktfTEVGVCA9IDM3O1xuICAgIGNvbnN0IFZLX1VQID0gMzg7XG4gICAgY29uc3QgVktfUklHSFQgPSAzOTtcbiAgICBjb25zdCBWS19ET1dOID0gNDA7XG5cbiAgICBpZiAoW1ZLX0RPV04sIFZLX1VQLCBWS19TUEFDRSwgVktfRU5URVIsIFZLX0xFRlQsIFZLX1JJR0hULCBWS19FU0NdLmluZGV4T2YoZS5rZXlDb2RlKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICBjYXNlIFZLX0RPV046XG4gICAgICBjYXNlIFZLX1JJR0hUOlxuICAgICAgICB0aGlzLm5leHRBY3RpdmVMaXN0SXRlbSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVktfVVA6XG4gICAgICBjYXNlIFZLX0xFRlQ6XG4gICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVMaXN0SXRlbSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVktfU1BBQ0U6XG4gICAgICAgIHRoaXMub3BlbkRyb3BEb3duKCk7XG4gICAgICAgIHRoaXMuaXRlbXNMaXN0LmNoaWxkcmVuW3RoaXMuYWN0aXZlSXRlbUlkeF0uZm9jdXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFZLX0VOVEVSOlxuICAgICAgICBjb25zdCBhY3RpdmUgPSB0aGlzLml0ZW1zTGlzdC5jaGlsZHJlblt0aGlzLmFjdGl2ZUl0ZW1JZHhdO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEVsZW1lbnQoYWN0aXZlKTtcbiAgICAgICAgdGhpcy5jbG9zZURyb3BEb3duKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0LmZvY3VzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBWS19FU0M6XG4gICAgICAgIHRoaXMuY2xvc2VEcm9wRG93bigpO1xuICAgICAgICB0aGlzLnNlbGVjdC5mb2N1cygpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH0sXG4gIG5leHRBY3RpdmVMaXN0SXRlbSgpIHtcbiAgICBjb25zdCBuZXh0RWxlbWVudEluZGV4ID0gKHRoaXMuYWN0aXZlSXRlbUlkeCA+PSB0aGlzLml0ZW1zTGlzdC5jaGlsZHJlbi5sZW5ndGggLSAxKSA/IDAgOiAodGhpcy5hY3RpdmVJdGVtSWR4ICsgMSk7XG4gICAgdGhpcy5pdGVtc0xpc3QuY2hpbGRyZW5bbmV4dEVsZW1lbnRJbmRleF0uZm9jdXMoKTtcbiAgICB0aGlzLmFjdGl2ZUl0ZW1JZHggPSBuZXh0RWxlbWVudEluZGV4O1xuXG4gIH0sXG4gIHByZXZpb3VzQWN0aXZlTGlzdEl0ZW0oKSB7XG4gICAgY29uc3QgcHJldkVsZW1lbnRJbmRleCA9ICh0aGlzLmFjdGl2ZUl0ZW1JZHggPT09IDApID8gdGhpcy5pdGVtc0xpc3QuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6ICh0aGlzLmFjdGl2ZUl0ZW1JZHggLSAxKTtcbiAgICB0aGlzLml0ZW1zTGlzdC5jaGlsZHJlbltwcmV2RWxlbWVudEluZGV4XS5mb2N1cygpO1xuICAgIHRoaXMuYWN0aXZlSXRlbUlkeCA9IHByZXZFbGVtZW50SW5kZXg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQWNjZXNzaWJpbGl0eVNlbGVjdDsiLCJjb25zdCBpZGIgPSByZXF1aXJlKCdpZGInKTtcclxuY29uc3QgQVBQX0RCX05BTUUgPSAncmVzdGF1cmFudHMtZGInO1xyXG5jb25zdCBEQl9SRVNUQVVSQU5UU19UQUJMRSA9ICdyZXN0YXVyYW50cyc7XHJcbmNvbnN0IEFQUF9EQl9WRVIgPSAxO1xyXG5cclxuLyoqXHJcbiAqIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxyXG4gKi9cclxuY2xhc3MgREJIZWxwZXIge1xyXG5cclxuICAvKipcclxuICAgKiBEYXRhYmFzZSBVUkwuXHJcbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgREFUQUJBU0VfVVJMKCkge1xyXG4gICAgY29uc3QgcG9ydCA9IDEzMzc7IC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcclxuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCByZXN0YXVyYW50cy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50cygpIHtcclxuICAgIHJldHVybiBmZXRjaChEQkhlbHBlci5EQVRBQkFTRV9VUkwgKyAnL3Jlc3RhdXJhbnRzJylcclxuICAgICAgLnRoZW4oZGF0YSA9PiBkYXRhLmpzb24oKSlcclxuICAgICAgLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnB1dFJlc3RhdXJhbnRzSW50b0luZGV4ZWREYihyZXN0YXVyYW50cykudGhlbigoKSA9PiByZXN0YXVyYW50cyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIHJldHVybiBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzRnJvbUluZGV4ZWREYigpLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICAgICAgaWYgKCFyZXN0YXVyYW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGZXRjaCBlcnJvcicpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnRzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50IGJ5IGlkIHdpdGggcmV2aWV3cy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50V2l0aFJldmlld3MoaWQpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgIHRoaXMuZmV0Y2hSZXN0YXVyYW50KGlkKSxcclxuICAgICAgdGhpcy5mZXRjaFJlc3RhdXJhbnRSZXZpZXdzKGlkKVxyXG4gICAgXSkudGhlbigoW3Jlc3RhdXJhbnQsIHJldmlld3NdKSA9PiB7XHJcbiAgICAgIHJlc3RhdXJhbnQucmV2aWV3cyA9IHJldmlld3M7XHJcbiAgICAgIHJldHVybiB0aGlzLnB1dFJlc3RhdXJhbnRJbnRvSW5kZXhlZERiKHJlc3RhdXJhbnQpLnRoZW4oKCkgPT4gcmVzdGF1cmFudCk7XHJcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50RnJvbUluZGV4ZWREYihpZCkudGhlbihyZXN0YXVyYW50ID0+IHtcclxuICAgICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmV0Y2ggZXJyb3InKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke0RCSGVscGVyLkRBVEFCQVNFX1VSTH0vcmVzdGF1cmFudHMvJHtpZH1gKVxyXG4gICAgICAudGhlbihkYXRhID0+IGRhdGEuanNvbigpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRSZXZpZXdzKHJlc3RhdXJhbnRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke0RCSGVscGVyLkRBVEFCQVNFX1VSTH0vcmV2aWV3cy8/cmVzdGF1cmFudF9pZD0ke3Jlc3RhdXJhbnRJZH1gKVxyXG4gICAgICAudGhlbihkYXRhID0+IGRhdGEuanNvbigpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRzRnJvbUluZGV4ZWREYigpIHtcclxuICAgIHJldHVybiBEQkhlbHBlci5vcGVuRGF0YWJhc2UoKVxyXG4gICAgICAudGhlbihkYiA9PiBkYi50cmFuc2FjdGlvbihEQl9SRVNUQVVSQU5UU19UQUJMRSkub2JqZWN0U3RvcmUoREJfUkVTVEFVUkFOVFNfVEFCTEUpLmdldEFsbCgpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRGcm9tSW5kZXhlZERiKGlkKSB7XHJcbiAgICByZXR1cm4gREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihkYiA9PlxyXG4gICAgICBkYi50cmFuc2FjdGlvbihEQl9SRVNUQVVSQU5UU19UQUJMRSkub2JqZWN0U3RvcmUoREJfUkVTVEFVUkFOVFNfVEFCTEUpLmdldCgraWQpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwdXRSZXN0YXVyYW50c0ludG9JbmRleGVkRGIocmVzdGF1cmFudHMpIHtcclxuICAgIHJldHVybiBEQkhlbHBlci5jbGVhclJlc3RhdXJhbnRzSW5JbmRleGVkRGIoKS50aGVuKCgpID0+IERCSGVscGVyLm9wZW5EYXRhYmFzZSgpLnRoZW4oZGIgPT4ge1xyXG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oREJfUkVTVEFVUkFOVFNfVEFCTEUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4gdHgub2JqZWN0U3RvcmUoREJfUkVTVEFVUkFOVFNfVEFCTEUpLnB1dChyZXN0YXVyYW50KSk7XHJcbiAgICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwdXRSZXN0YXVyYW50SW50b0luZGV4ZWREYihyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihkYiA9PiB7XHJcbiAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oREJfUkVTVEFVUkFOVFNfVEFCTEUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgdHgub2JqZWN0U3RvcmUoREJfUkVTVEFVUkFOVFNfVEFCTEUpLnB1dChyZXN0YXVyYW50KTtcclxuICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2xlYXJSZXN0YXVyYW50c0luSW5kZXhlZERiKCkge1xyXG4gICAgcmV0dXJuIERCSGVscGVyLm9wZW5EYXRhYmFzZSgpLnRoZW4oZGIgPT4ge1xyXG4gICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKERCX1JFU1RBVVJBTlRTX1RBQkxFLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgIHR4Lm9iamVjdFN0b3JlKERCX1JFU1RBVVJBTlRTX1RBQkxFKS5jbGVhcigpO1xyXG4gICAgICByZXR1cm4gdHguY29tcGxldGU7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvcGVuRGF0YWJhc2UoKSB7XHJcbiAgICByZXR1cm4gaWRiLm9wZW4oQVBQX0RCX05BTUUsIEFQUF9EQl9WRVIsICh1cGdyYWRlRGIpID0+IHtcclxuICAgICAgc3dpdGNoICh1cGdyYWRlRGIub2xkVmVyc2lvbikge1xyXG4gICAgICAgIGNhc2UgMCA6XHJcbiAgICAgICAgICBjb25zdCByZXN0YXVyYW50U3RvcmUgPSB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfUkVTVEFVUkFOVFNfVEFCTEUsIHtrZXlQYXRoOiAnaWQnfSk7XHJcbiAgICAgICAgICByZXN0YXVyYW50U3RvcmUuY3JlYXRlSW5kZXgoJ3N0YXR1cycsICdzdGF0dXMnKTtcclxuICAgICAgICAvLyBicmVhayBvbWl0dGVkXHJcbiAgICAgICAgZGVmYXVsdCA6XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQpIHtcclxuICAgIC8vIGZldGNoIGFsbCByZXN0YXVyYW50cyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgIHJldHVybiBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRXaXRoUmV2aWV3cyhpZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgdHlwZSB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lKGN1aXNpbmUsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHMgIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKCkudGhlbihyZXN0YXVyYW50cyA9PiB7XHJcbiAgICAgIHJldHVybiByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCkge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICByZXR1cm4gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIGFuZCBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCkge1xyXG4gICAgcmV0dXJuIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKS50aGVuKHJlc3RhdXJhbnRzID0+IHtcclxuICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50cztcclxuXHJcbiAgICAgIGlmIChjdWlzaW5lICE9ICdhbGwnKSB7IC8vIGZpbHRlciBieSBjdWlzaW5lXHJcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5laWdoYm9yaG9vZCAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXHJcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoTmVpZ2hib3Job29kc0FuZEN1aXNpbmVzKCkge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICBjb25zdCBuZWlnaGJvcmhvb2RzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5uZWlnaGJvcmhvb2QpO1xyXG4gICAgICAvLyBHZXQgYWxsIGN1aXNpbmVzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgIGNvbnN0IGN1aXNpbmVzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5jdWlzaW5lX3R5cGUpO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBuZWlnaGJvcmhvb2RzXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmVpZ2hib3Job29kczogbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpKSxcclxuICAgICAgICBjdWlzaW5lczogY3Vpc2luZXMuZmlsdGVyKCh2LCBpKSA9PiBjdWlzaW5lcy5pbmRleE9mKHYpID09IGkpLFxyXG4gICAgICAgIHJlc3RhdXJhbnRzLFxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyB1cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIHJldHVybiAoYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIGAvaW1nLyR7cmVzdGF1cmFudC5pZH1fc21hbGwuanBnYDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpbWFnZVNyY1NldEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIChgL2ltZy8ke3Jlc3RhdXJhbnQucGhvdG9ncmFwaH1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcCBtYXJrZXIgZm9yIGEgcmVzdGF1cmFudC5cclxuICAgKi9cclxuICBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgIHBvc2l0aW9uOiByZXN0YXVyYW50LmxhdGxuZyxcclxuICAgICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxyXG4gICAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gREJIZWxwZXI7IiwiY29uc3QgREJIZWxwZXIgPSByZXF1aXJlKCcuL2RiaGVscGVyJyk7XHJcbmNvbnN0IEFjY2Vzc2liaWxpdHlTZWxlY3QgPSByZXF1aXJlKCcuL2FjY2Vzc2liaWxpdHktc2VsZWN0Jyk7XHJcbmNvbnN0IHByb2Nlc3MgPSByZXF1aXJlKCcuL3Byb2Nlc3MnKTtcclxuXHJcbmxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzO1xyXG52YXIgbWFwO1xyXG52YXIgbWFya2VycyA9IFtdO1xyXG52YXIgc2Nyb2xsZWQgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuICBjb25zb2xlLmxvZygnRE9NQ29udGVudExvYWRlZCcpO1xyXG4gIHByb2Nlc3MucmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzQW5kQ3Vpc2luZXMoKS50aGVuKChyZXN0YXVyYW50cykgPT4ge1xyXG4gICAgZmlsbFJlc3RhdXJhbnRzSFRNTChyZXN0YXVyYW50cyk7XHJcbiAgfSlcclxufSk7XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVNYXAoKSB7XHJcbiAgY29uc3QgbWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xyXG4gIGlmIChtYXAuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKXtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0Nsb3NlIEdvb2dsZSBNYXAnKTtcclxuICAgIG1hcC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdPcGVuIEdvb2dsZSBNYXAnKTtcclxuICAgIG1hcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgfVxyXG59XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFwLWFjdGlvbnMgLnRvZ2dsZS1tYXAnKS5vbmNsaWNrID0gdG9nZ2xlTWFwO1xyXG5cclxuLyoqXHJcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsTmVpZ2hib3Job29kc0hUTUwobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykge1xyXG4gIGNvbnN0IHNlbGVjdCA9IG5ldyBBY2Nlc3NpYmlsaXR5U2VsZWN0KFxyXG4gICAgJyNuZWlnaGJvcmhvb2RzLXNlbGVjdCcsXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICdOZWlnaGJvcmhvb2QnLFxyXG4gICAgICBsYWJlbDogJ05laWdoYm9yaG9vZCcsXHJcbiAgICAgIGluaXRpYWxWYWx1ZToge25hbWU6ICdBbGwgTmVpZ2hib3Job29kcycsIHZhbHVlOiAnYWxsJ30sXHJcbiAgICAgIHZhbHVlczogc2VsZi5uZWlnaGJvcmhvb2RzLFxyXG4gICAgICBvbkNoYW5nZTogdXBkYXRlUmVzdGF1cmFudHNcclxuICAgIH1cclxuICApO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBjdWlzaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBmZXRjaE5laWdoYm9yaG9vZHNBbmRDdWlzaW5lcygpIHtcclxuICByZXR1cm4gREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzQW5kQ3Vpc2luZXMoKS50aGVuKCh7IHJlc3RhdXJhbnRzLCBuZWlnaGJvcmhvb2RzLCBjdWlzaW5lcyB9KSA9PiB7XHJcblxyXG4gICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcclxuICAgIGZpbGxOZWlnaGJvcmhvb2RzSFRNTChuZWlnaGJvcmhvb2RzKTtcclxuXHJcbiAgICBzZWxmLmN1aXNpbmVzID0gY3Vpc2luZXM7XHJcbiAgICBmaWxsQ3Vpc2luZXNIVE1MKGN1aXNpbmVzKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdGF1cmFudHM7XHJcblxyXG4gIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsQ3Vpc2luZXNIVE1MKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykge1xyXG5cclxuICBjb25zdCBzZWxlY3QgPSBuZXcgQWNjZXNzaWJpbGl0eVNlbGVjdChcclxuICAgICcjY3Vpc2luZXMtc2VsZWN0JyxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ0N1aXNpbmVzJyxcclxuICAgICAgbGFiZWw6ICdDdWlzaW5lcycsXHJcbiAgICAgIGluaXRpYWxWYWx1ZToge25hbWU6ICdBbGwgQ3Vpc2luZXMnLCB2YWx1ZTogJ2FsbCd9LFxyXG4gICAgICB2YWx1ZXM6IGN1aXNpbmVzLFxyXG4gICAgICBvbkNoYW5nZTogdXBkYXRlUmVzdGF1cmFudHNcclxuICAgIH1cclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgbGV0IGxvYyA9IHtcclxuICAgIGxhdDogNDAuNzIyMjE2LFxyXG4gICAgbG5nOiAtNzMuOTg3NTAxXHJcbiAgfTtcclxuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcbiAgICBpZiAoIXNjcm9sbGVkKSB7XHJcbiAgICAgIHNjcm9sbGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhpZGRlbkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3Jlc3RhdXJhbnRzLWxpc3QgbGkuaGlkZGVuJyk7XHJcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGhpZGRlbkl0ZW1zLCBlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKSk7XHJcbiAgfSk7XHJcblxyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykucXVlcnlTZWxlY3RvcignaWZyYW1lJykuc2V0QXR0cmlidXRlKCd0aXRsZScsICdHb29nbGUgbWFwJyk7XHJcbiAgfSwgMjAwKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUmVzdGF1cmFudHMoKSB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcblxyXG4gIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0LmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3QuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyk7XHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QpLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgcmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICBmaWxsUmVzdGF1cmFudHNIVE1MKHJlc3RhdXJhbnRzKTtcclxuICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cykge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgaWYoc2VsZi5tYXJrZXJzKSB7XHJcbiAgICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtID0+IG0uc2V0TWFwKG51bGwpKTtcclxuICB9XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZ1bmN0aW9uIGZpbGxSZXN0YXVyYW50c0hUTUwocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSB7XHJcblxyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKChyZXN0YXVyYW50LCBpKSA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCwgaSkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcChyZXN0YXVyYW50cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCwgaW5kZXgpIHtcclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgbGkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xyXG4gIGlmIChpbmRleCA+IDEpIHtcclxuICAgIGxpLmNsYXNzTmFtZSA9ICdoaWRkZW4nO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xyXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGBBbiBpbWFnZSBmcm9tIHRoZSByZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG4gIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGNvbnN0IGluZm9CbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGluZm9CbG9jay5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbmZvJztcclxuXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XHJcbiAgbmFtZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1jYXJkLW5hbWUnO1xyXG4gIG5hbWUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgaW5mb0Jsb2NrLmFwcGVuZChuYW1lKTtcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIG5laWdoYm9yaG9vZC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xyXG4gIGluZm9CbG9jay5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBhZGRyZXNzLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBpbmZvQmxvY2suYXBwZW5kKGFkZHJlc3MpO1xyXG5cclxuICBjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscyc7XHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbmZvQmxvY2suYXBwZW5kKG1vcmUpO1xyXG4gIGxpLmFwcGVuZChpbmZvQmxvY2spO1xyXG5cclxuICByZXR1cm4gbGlcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXHJcbiAqL1xyXG5mdW5jdGlvbiBhZGRNYXJrZXJzVG9NYXAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm1hcCk7XHJcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsICgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsXHJcbiAgICB9KTtcclxuICAgIGlmICghc2VsZi5tYXJrZXJzKSB7XHJcbiAgICAgIHNlbGYubWFya2VycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufVxyXG4iLCIvKiBSZWdpc3RlciBzZXJ2aWNlIHdvcmtlciB3aXRoIGV2ZW50cyAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclNlcnZpY2VXb3JrZXIoKSB7XHJcblxyXG4gIGlmICghJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXJ2aWNlV29ya2VyIG5vdCByZWdpc3RlcicpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zdy5qcycpLnRoZW4oZnVuY3Rpb24gKHJlZykge1xyXG4gICAgaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChyZWcuYWN0aXZlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdUaGVyZSBpcyBhbiBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVnLndhaXRpbmcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ3dhaXRpbmcgOicsIHJlZy53YWl0aW5nKTtcclxuICAgICAgY29uc29sZS5sb2coJ3NlcnZpY2Ugd29ya2VyIGlzIHdhaXRpbmcnKTtcclxuICAgICAgdXBkYXRlU2VydmljZVdvcmtlcihyZWcud2FpdGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlZy5pbnN0YWxsaW5nKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdpbnN0YWxsaW5nIDogJywgcmVnKTtcclxuICAgICAgY29uc29sZS5sb2coJ3NlcnZpY2Ugd29ya2VyIHN0YXR1cyBpcyBpbnN0YWxsaW5nJyk7XHJcbiAgICAgIHRyYWNrSW5zdGFsbGluZyhyZWcuaW5zdGFsbGluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWZvdW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnc2VydmljZSB3b3JrZXIgdXBkYXRlIGZvdW5kJywgcmVnKTtcclxuICAgICAgdHJhY2tJbnN0YWxsaW5nKHJlZy5pbnN0YWxsaW5nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciByZWZyZXNoaW5nO1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHJlZnJlc2hpbmcpIHJldHVybjtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIHJlZnJlc2hpbmcgPSB0cnVlO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0pO1xyXG5cclxuICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKCdSZWdpc3RyYXRpb24gZmFpbGVkIHdpdGggJyArIGVycm9yKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdHJhY2tJbnN0YWxsaW5nKGluc3RhbGxpbmdXb3JrZXIpIHtcclxuICBpZiAoIWluc3RhbGxpbmdXb3JrZXIpIHtcclxuICAgIGNvbnNvbGUubG9nKCdXb3JrZXIgbm90IGRlZmluZWQhJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGluc3RhbGxpbmdXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnU2VydmljZVdvcmtlciBzdGF0ZSB3YXMgY2hhbmdlZCB0byAnICsgaW5zdGFsbGluZ1dvcmtlci5zdGF0ZSk7XHJcbiAgICBpZiAoaW5zdGFsbGluZ1dvcmtlci5zdGF0ZSA9PT0gJ2luc3RhbGxlZCcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VyIGluc3RhbGxlZCBhbmQgd2FpdGluZyBmb3IgYWN0aXZhdGlvbicsIGluc3RhbGxpbmdXb3JrZXIpO1xyXG4gICAgICB1cGRhdGVTZXJ2aWNlV29ya2VyKGluc3RhbGxpbmdXb3JrZXIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVTZXJ2aWNlV29ya2VyKHdvcmtlcikge1xyXG4gIHNlbmRNZXNzYWdlVG9TZXJ2aWNlV29ya2VyKHthY3Rpb246ICdza2lwV2FpdGluZyd9LCB3b3JrZXIpXHJcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2VGcm9tU3cpIHtcclxuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VGcm9tU3cpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9TZXJ2aWNlV29ya2VyKG1zZywgd29ya2VyKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHZhciBtc2dDaGFuID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcblxyXG4gICAgLy8gSGFuZGxlciBmb3IgcmVjaWV2aW5nIG1lc3NhZ2UgcmVwbHkgZnJvbSBzZXJ2aWNlIHdvcmtlclxyXG4gICAgbXNnQ2hhbi5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgaWYgKGV2ZW50LmRhdGEuZXJyb3IpIHtcclxuICAgICAgICByZWplY3QoZXZlbnQuZGF0YS5lcnJvcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZShldmVudC5kYXRhKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFNlbmQgbWVzc2FnZSB0byBzZXJ2aWNlIHdvcmtlciBhbG9uZyB3aXRoIHBvcnQgZm9yIHJlcGx5XHJcbiAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnLCBbbXNnQ2hhbi5wb3J0Ml0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICByZWdpc3RlclNlcnZpY2VXb3JrZXIsXHJcbn07Il19
