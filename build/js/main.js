"use strict";var map,restaurants=void 0,neighborhoods=void 0,cuisines=void 0,markers=[];function fetchNeighborhoods(){DBHelper.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}function fillNeighborhoodsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})}function fetchCuisines(){DBHelper.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}function fillCuisinesHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})}function updateRestaurants(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,s=t[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,s,function(e,t){e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}function resetRestaurants(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e}function fillRestaurantsHTML(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),addMarkersToMap()}function createRestaurantHTML(e){var t=document.createElement("li");t.setAttribute("tabindex",0);var n=document.createElement("img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.setAttribute("alt",e.name),t.append(n);var r=document.createElement("div");r.className="restaurant-info";var a=document.createElement("h2");a.className="restaurant-card-name",a.setAttribute("tabindex","0"),a.innerHTML=e.name,r.append(a);var s=document.createElement("p");s.setAttribute("tabindex",0),s.innerHTML=e.neighborhood,r.append(s);var o=document.createElement("p");o.setAttribute("tabindex",0),o.innerHTML=e.address,r.append(o);var i=document.createElement("a");return i.innerHTML="View Details",i.href=DBHelper.urlForRestaurant(e),r.append(i),t.append(r),t}function addMarkersToMap(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})}document.addEventListener("DOMContentLoaded",function(e){fetchNeighborhoods(),fetchCuisines()}),window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibmVpZ2hib3Job29kcyIsInJlc3RhdXJhbnRzIiwiY3Vpc2luZXMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJEQkhlbHBlciIsImVycm9yIiwic2VsZiIsImNvbnNvbGUiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzZWxlY3QiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsIm5laWdoYm9yaG9vZCIsIm9wdGlvbiIsInZhbHVlIiwiZmV0Y2hDdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInNjcm9sbHdoZWVsIiwiY1NlbGVjdCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY0luZGV4Iiwic2VsZWN0ZWRJbmRleCIsIm5JbmRleCIsIm5TZWxlY3QiLCJyZXNldFJlc3RhdXJhbnRzIiwibWFya2VycyIsIm0iLCJzZXRNYXAiLCJmaWxsUmVzdGF1cmFudHNIVE1MIiwicmVzdGF1cmFudCIsInVsIiwiYXBwZW5kIiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJsaSIsInNldEF0dHJpYnV0ZSIsImltYWdlIiwic3JjIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiYWRkTWFya2Vyc1RvTWFwIiwiaW5mb0Jsb2NrIiwiY2xhc3NOYW1lIiwibmFtZSIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJtYXAiLCJtYXJrZXIiLCJ1cmwiLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJhQUFBLElBQ0VBLElBREVDLGlCQUFBQSxFQUNGRCxtQkFBQUEsRUFERkUsY0FBQUEsRUFFRUEsUUFBQUEsR0FnQkYsU0FB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QUFZYSxjQUFqQixLQU1BVSxPQUxBQSxFQUFBQSxVQUFpQkUsZUFjakJFLEVBQUtDLEtBQU8vQyxTQUFTZ0QsaUJBQWlCaEIsR0FadENVLEVBQU05QixPQUFBQSxHQUNOQSxFQUFBQSxPQUFBQSxHQUVBOEIsRUFtQkYsU0FBU0QsbUJBQWdELEVBQUFwQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBbEJILEtBQUtMLGFBWjdCWSxRQUFTUyxTQUFBQSxHQUV0QjRCLElBQUtDLEVBQU8vQyxTQUFTZ0QsdUJBQXJCaEIsRUFBQTlCLEtBQUErQyxLQUNBUCxPQUFBQSxLQUFVUixNQUFPWSxZQUFqQkksRUFBQSxRQUFBLFdBQ0doQixPQUFPUSxTQUFWSyxLQUFBRyxFQUFBQyxNQUVBakQsS0FBT2tDLFFBQVBnQixLQUFBRixLQXBLRnpDLFNBQVM0QyxpQkFBaUIsbUJBQW9CLFNBQUNDLEdBQS9DN0MscUJBQ0VNLGtCQXVERUYsT0FBQUEsUUFBQSxXQUtKWCxLQUFBK0MsSUFBQSxJQUFBTSxPQUFBQyxLQUFBQyxJQUFBaEQsU0FBQUMsZUFBQSxPQUFBLENBU0lnRCxLQUFNLEdBQ05DLE9BZE96QixDQUpUMEIsSUFBQSxVQU1EQyxLQUFBLFdBS0RDLGFBQWlCLElBRWJGIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudHMsXHJcbiAgbmVpZ2hib3Job29kcyxcclxuICBjdWlzaW5lcztcclxudmFyIG1hcDtcclxudmFyIG1hcmtlcnMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuICAvL3JlZ2lzdGVyU2VydmljZVdvcmtlcigpO1xyXG4gIGZldGNoTmVpZ2hib3Job29kcygpO1xyXG4gIGZldGNoQ3Vpc2luZXMoKTtcclxufSk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZnVuY3Rpb24gZmV0Y2hOZWlnaGJvcmhvb2RzKCkge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsTmVpZ2hib3Job29kc0hUTUwobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG4gIG5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZ1bmN0aW9uIGZldGNoQ3Vpc2luZXMoKSB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsQ3Vpc2luZXNIVE1MKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgbGV0IGxvYyA9IHtcclxuICAgIGxhdDogNDAuNzIyMjE2LFxyXG4gICAgbG5nOiAtNzMuOTg3NTAxXHJcbiAgfTtcclxuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGUgcGFnZSBhbmQgbWFwIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUmVzdGF1cmFudHMoKSB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuICBjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcblxyXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcblxyXG4gIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0W2NJbmRleF0udmFsdWU7XHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xyXG5cclxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xyXG4gICAgICBmaWxsUmVzdGF1cmFudHNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIHRoZWlyIEhUTUwgYW5kIHJlbW92ZSB0aGVpciBtYXAgbWFya2Vycy5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpIHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdO1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICB1bC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIHNlbGYubWFya2Vycy5mb3JFYWNoKG0gPT4gbS5zZXRNYXAobnVsbCkpO1xyXG4gIHNlbGYubWFya2VycyA9IFtdO1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsUmVzdGF1cmFudHNIVE1MKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSZXN0YXVyYW50SFRNTChyZXN0YXVyYW50KSB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcclxuXHJcbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xyXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHJlc3RhdXJhbnQubmFtZSk7XHJcbiAgbGkuYXBwZW5kKGltYWdlKTtcclxuXHJcbiAgY29uc3QgaW5mb0Jsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgaW5mb0Jsb2NrLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWluZm8nO1xyXG5cclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICBuYW1lLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWNhcmQtbmFtZSc7XHJcbiAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcclxuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuICBpbmZvQmxvY2suYXBwZW5kKG5hbWUpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmVpZ2hib3Job29kLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcclxuICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XHJcbiAgaW5mb0Jsb2NrLmFwcGVuZChuZWlnaGJvcmhvb2QpO1xyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGFkZHJlc3Muc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xyXG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xyXG4gIGluZm9CbG9jay5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGluZm9CbG9jay5hcHBlbmQobW9yZSk7XHJcbiAgbGkuYXBwZW5kKGluZm9CbG9jayk7XHJcblxyXG4gIHJldHVybiBsaVxyXG59XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmZ1bmN0aW9uIGFkZE1hcmtlcnNUb01hcChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpIHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmxcclxuICAgIH0pO1xyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICB9KTtcclxufVxyXG4iXX0=
